<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-intro/idpbuilder/how-it-works">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">idpbuilder Fundamentals | CNOE</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://cnoe-io.github.io/docs/intro/idpbuilder/how-it-works"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="idpbuilder Fundamentals | CNOE"><meta data-rh="true" name="description" content="idpbuilder Fundamentals"><meta data-rh="true" property="og:description" content="idpbuilder Fundamentals"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://cnoe-io.github.io/docs/intro/idpbuilder/how-it-works"><link data-rh="true" rel="alternate" href="https://cnoe-io.github.io/docs/intro/idpbuilder/how-it-works" hreflang="en"><link data-rh="true" rel="alternate" href="https://cnoe-io.github.io/docs/intro/idpbuilder/how-it-works" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="CNOE RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="CNOE Atom Feed">




<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"><link rel="stylesheet" href="/assets/css/styles.57b409e6.css">
<link rel="preload" href="/assets/js/runtime~main.7f559ae6.js" as="script">
<link rel="preload" href="/assets/js/main.228b830d.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="CNOE Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="CNOE Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro/cnoe">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://calendar.google.com/calendar/u/0/embed?src=064a2adfce866ccb02e61663a09f99147f22f06374e7a8994066bdc81e066986@group.calendar.google.com&amp;ctz=America/Los_Angeles" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar--calendar-link" aria-label="Community Calendar"></a><a href="https://cloud-native.slack.com/archives/C05TN9WFN5S" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar--slack-link" aria-label="Slack Channel"></a><a href="https://github.com/cnoe-io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar--github-link" aria-label="GitHub Repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/intro/cnoe">Concepts</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/intro/cnoe">What is CNOE?</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/intro/idpbuilder">idpBuilder Overview</a><button aria-label="Toggle the collapsible sidebar category &#x27;idpBuilder Overview&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/intro/idpbuilder/how-it-works">idpbuilder Fundamentals</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/intro/idpbuilder/override">Customizing idpbuilder</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/capabilities">Technology Capabilities</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/intro/technology">Technology Choices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/intro/radar">Technology Radars</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/reference-implementation/idpbuilder">Tutorial</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/contribute">Contributing</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Concepts</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/intro/idpbuilder"><span itemprop="name">idpBuilder Overview</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">idpbuilder Fundamentals</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>idpbuilder Fundamentals</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="security">Security<a class="hash-link" href="#security" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="self-signed-certificate">Self Signed Certificate<a class="hash-link" href="#self-signed-certificate" title="Direct link to heading">​</a></h3><p>To ensure applications inside the cluster can talk to other services, idpbuilder creates a self-signed TLS certificate. The certificate is a wild card certificate
for the domain name and any subdomains given by the <code>--host</code> flag.
For example, if you use the default domain name <code>cnoe.localtest.me</code> the certificate is issued for <code>cnoe.localtest.me</code> and <code>*.cnoe.localtest.me</code></p><p>This certificate is then used by ingress-nginx as <!-- -->[the default TLS certificate]<!-- -->(<a href="https://kubernetes.github.io/ingress-nginx/user-guide/tls/#default-ssl-certificate" target="_blank" rel="noopener noreferrer">https://kubernetes.github.io/ingress-nginx/user-guide/tls/#default-ssl-certificate</a>_. This means you can override TLS certificate used at ingress level if desired.</p><p>The certificate is also <a href="https://argo-cd.readthedocs.io/en/stable/operator-manual/declarative-setup/#repositories-using-self-signed-tls-certificates-or-are-signed-by-custom-ca" target="_blank" rel="noopener noreferrer">imported to ArgoCD</a> as one of trusted CAs. This is necessary to make sure ArgoCD can talk to Gitea services without disabling TLS.</p><p>Finally, the certificate is exposed as a secret named <code>idpbuilder-cert</code> in the default namespace. To retrieve it, run the following command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get secret -n default idpbuilder-cert</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="getting-relevant-secrets">Getting Relevant Secrets<a class="hash-link" href="#getting-relevant-secrets" title="Direct link to heading">​</a></h3><p>The <code>idpbuilder get secrets</code> command retrieves the following:</p><ul><li>ArgoCD initial admin password.</li><li>Gitea admin user credentials.</li><li>Any secrets labeled with <code>cnoe.io/cli-secret=true</code>.</li></ul><p>You can think of the command as executing the following kubectl commands:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl -n argocd get secret argocd-initial-admin-secret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get secrets -n gitea gitea-admin-secret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get secrets -A -l cnoe.io/cli-secret</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you want to retrieve secrets for a package, you can use the <code>-p</code> flag. To get secrets for a package named <code>gitea</code>: </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">idpbuilder get secrets -p gitea</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For the <code>-p</code> flag to work, you must label the secret with <code>cnoe.io/package-name</code>.
For example, to make secret values available in a secret named <code>my-secret</code> for a package named <code>foo</code>:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl label secret my-secret </span><span class="token string" style="color:#e3116c">&quot;cnoe.io/package-name=foo&quot;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;cnoe.io/cli-secret=true&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The secret will then be listed when issuing the <code>idpbuilder get secrets</code> command.
Alternatively, you can use the following command to retrieve the individual secret:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">idpbuilder get secrets -p foo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="networking">Networking<a class="hash-link" href="#networking" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="traffic-flow">Traffic Flow<a class="hash-link" href="#traffic-flow" title="Direct link to heading">​</a></h3><p>The default Docker-on-Linux configuration for kind cluster establishes the following setup:</p><ul><li>A Kubernetes node runs as a Docker container with port 443 mapped to host port 8443. You can confirm this by running <code>docker container ls</code></li><li>The ingress-nginx service is configured as NodePort mode, listening on port 443. You can confirm this by running <code>kubectl get service -n ingress-nginx ingress-nginx-controller</code></li></ul><p>When a request is made to <a href="https://gitea.cnoe.localtest.me:8443" target="_blank" rel="noopener noreferrer">https://gitea.cnoe.localtest.me:8443</a>, the traffic flow follows this sequence:</p><ol><li>The domain name resolves to the local loopback address</li><li>A request is sent to <code>127.0.0.1:8443</code> with the host header <code>gitea.cnoe.localtest.me:8443</code></li><li>The request is forwarded to container port 443</li><li>Ingress-nginx examines the SNI and host header to route traffic to the Gitea service</li><li>Gitea processes the request and returns a response
<img loading="lazy" alt="img.png" src="/assets/images/idpbuilder-dns-9462be1aa0af12554e03e841f3b72bfb.png" width="907" height="407" class="img_ev3q"></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dns-configuration">DNS Configuration<a class="hash-link" href="#dns-configuration" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="external-dns-resolution">External DNS Resolution<a class="hash-link" href="#external-dns-resolution" title="Direct link to heading">​</a></h4><p>By default, idpbuilder uses <code>cnoe.localtest.me</code> as the base domain for exposing services like ArgoCD and Gitea. The <code>localtest.me</code> domain and its subdomains automatically resolve to the local loopback address, providing a consistent naming scheme without requiring localhost. For more details, visit <a href="https://readme.localtest.me/" target="_blank" rel="noopener noreferrer">the localtest.me documentation</a>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="in-cluster-dns-configuration">In-cluster DNS Configuration<a class="hash-link" href="#in-cluster-dns-configuration" title="Direct link to heading">​</a></h4><p>To ensure proper name resolution both inside and outside the cluster, idpbuilder configures the cluster&#x27;s CoreDNS service. While the default domain (cnoe.localtest.me) resolving to <code>127.0.0.1</code> works for external access through the NodePort service, it creates challenges for in-cluster communication.</p><p>For example, when an ArgoCD pod tries to access <code>gitea.cnoe.localtest.me</code>, the address would resolve to the pod&#x27;s own loopback interface <code>127.0.0.1</code>. To address this, idpbuilder configures CoreDNS with rewrite rules like:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rewrite name gitea.cnoe.localtest.me ingress-nginx-controller.ingress-nginx.svc.cluster.local</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This CoreDNS rewrite rule instructs CoreDNS to resolve requests made for <code>gitea.cnoe.localtest.me</code> using the address given by <code>ingress-nginx-controller.ingress-nginx.svc.cluster.local</code></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="routing-modes">Routing Modes<a class="hash-link" href="#routing-modes" title="Direct link to heading">​</a></h2><p>idpbuilder supports two modes of routing requests to in-cluster resources: domain-based and path-based.
The behavior is configured with the <code>--use-path-routing</code> flag, which defaults to <code>false</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="domain-based-routing">Domain-based routing<a class="hash-link" href="#domain-based-routing" title="Direct link to heading">​</a></h3><p>This is the default behavior of idpbuilder. In this mode, services are exposed under their own domain names.
For example:</p><ul><li>ArgoCD UI is accessed via <code>https://argocd.cnoe.localtest.me</code></li><li>Gitea UI is accessed via <code>https://gitea.cnoe.localtest.me</code></li></ul><p>This approach is generally cleaner and offers more flexible routing options because it requires less complex ingress configurations.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="path-based-routing">Path-based routing<a class="hash-link" href="#path-based-routing" title="Direct link to heading">​</a></h3><p>When you use the <code>--use-path-routing</code> flag, idpbuilder configures all services under a single domain name, with routing based on path parameters.
For example:</p><ul><li>ArgoCD UI is accessed via <code>https://cnoe.localtest.me/argocd</code></li><li>Gitea UI is accessed via <code>https://cnoe.localtest.me/gitea</code></li></ul><p>This is useful when you are constrained to using a single domain name and cannot use subdomains.
A good example is when using GitHub Codespaces. When <a href="https://docs.github.com/en/codespaces/developing-in-a-codespace/forwarding-ports-in-your-codespace" target="_blank" rel="noopener noreferrer">forwarding ports</a> in Codespaces, you are given a single domain name (like <code>wild-broomstick-abc.github.dev</code>) to reach all services running in your codespace.
In such situations, you cannot use subdomains (e.g., <code>argocd.wild-broomstick-abc.github.dev</code> would not work), making path-based routing the appropriate choice.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="local-oci-registry">Local OCI Registry<a class="hash-link" href="#local-oci-registry" title="Direct link to heading">​</a></h2><p>The local Gitea instance created by idpbuilder contains a built-in OCI registry for hosting container images as &quot;packages&quot; in Gitea nomenclature. It is a standard OCI registry, so the API should be compatible with any tools that are OCI compliant. That includes the <code>docker</code> cli.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pushing-image">Pushing image<a class="hash-link" href="#pushing-image" title="Direct link to heading">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> login gitea.cnoe.localtest.me:8443                                          </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># see the note section below for retrieving your password.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Username: giteaAdmin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Password: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> pull docker.io/library/ubuntu:24.04 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># default way</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> tag docker.io/library/ubuntu:24.04 gitea.cnoe.localtest.me:8443/giteaadmin/ubuntu:24.04</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> push gitea.cnoe.localtest.me:8443/giteaadmin/ubuntu:24.04</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Pushing image using path based routing. You can also use the OCI registry with path based routing mode (the `--use-path-routing` flag)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># docker tag docker.io/library/ubuntu:24.04 cnoe.localtest.me:8443/giteaadmin/ubuntu:24.04</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># docker push cnoe.localtest.me:8443/giteaadmin/ubuntu:24.04</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p><strong>NOTE</strong>: You can get the giteaAdmin password in the same way as you do for the web or git interface.</p><p><code>idpbuilder get secrets -p gitea</code></p><p>Or you can use this to login directly:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">idpbuilder get secrets -p gitea -o json | \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  jq &#x27;.[0].data.password&#x27; -r | \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  docker login -u giteaAdmin --password-stdin gitea.cnoe.localtest.me:8443</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tagging-image">Tagging Image<a class="hash-link" href="#tagging-image" title="Direct link to heading">​</a></h3><p>Images pushed to Gitea OCI registry must be tagged with the following naming convention: </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{registry}/{owner}/{image}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For example: <code>gitea.cnoe.localtest.me:8443/giteaadmin/ubuntu:24.04</code></p><p>This is a naming convention enforced by Gitea. Please see <a href="https://docs.gitea.com/usage/packages/container" target="_blank" rel="noopener noreferrer">the Gitea documentation</a> for more information.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pulling-images">Pulling Images<a class="hash-link" href="#pulling-images" title="Direct link to heading">​</a></h3><p>You can pull an image back to your local machine using your docker client like so:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker pull gitea.cnoe.localtest.me:8443/giteaadmin/ubuntu:24.04</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="no-pull-secret-needed">No Pull Secret Needed<a class="hash-link" href="#no-pull-secret-needed" title="Direct link to heading">​</a></h4><p>The Gitea instance allows for anonymous read access. This means that you can pull git repo contents and container images without logging in.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="referencing-images-in-manifests-on-the-idpbuilder-k8s-cluster">Referencing Images In Manifests On The Idpbuilder K8s Cluster<a class="hash-link" href="#referencing-images-in-manifests-on-the-idpbuilder-k8s-cluster" title="Direct link to heading">​</a></h3><p>You can create a pod or a deployment that references images in the local registry. For example, to create a pod:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> debug</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> gitea.cnoe.localtest.me</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">8443/giteaadmin/ubuntu</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">24.04</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> debug</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> sleep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3600&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pulling-images-from-inside-idpbuilder-k8s-cluster">Pulling Images From Inside Idpbuilder K8s Cluster:<a class="hash-link" href="#pulling-images-from-inside-idpbuilder-k8s-cluster" title="Direct link to heading">​</a></h3><p>Because we are using an NGINX Ingress and pushing our image from off cluster,
Gitea and its OCI registry think all images pushed to it are prefixed with <code>gitea.cnoe.localtest.me:8443</code>.</p><p>This is correct by the OCI spec standards. However, when you are on the cluster, that ingress is not available to you.
You can use the service name of gitea, but gitea will not know what images are being asked for at the svc domain name. To work around this issue, we use containerd to rewrite those image names so that they can be referenced at the external url:</p><p>See <a href="https://github.com/cnoe-io/idpbuilder/blob/main/pkg/kind/resources/kind.yaml.tmpl" target="_blank" rel="noopener noreferrer">the Kind config</a> for how this is done.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="transferring-images-from-remote-registries-to-idbpbuilder">Transferring images from remote registries to idbpbuilder<a class="hash-link" href="#transferring-images-from-remote-registries-to-idbpbuilder" title="Direct link to heading">​</a></h3><p>Now that you have a registry up and running at <code>cnoe.localtest.me:8443</code> you can copy your images to it. This is especially convenient if you want to pre-load a number of images from some remote before going offline. You can also use this technique to load images into codespaces that are behind a corporate firewall.</p><p>To make this even easier, you can use a tool like <a href="https://oras.land" target="_blank" rel="noopener noreferrer">ORAS</a> or <a href="https://github.com/regclient/regclient" target="_blank" rel="noopener noreferrer">regclient</a> to copy between them. These tools are beyond the scope of this help document, but at the time of this writing a simple copy command using regclient looks like:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ regctl registry login cnoe.localtest.me:8443               </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Enter Username </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">giteaadmin</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">: giteaadmin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Enter Password:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ regctl registry </span><span class="token builtin class-name">set</span><span class="token plain"> cnoe.localtest.me:8443 --tls</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">insecure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">time</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2024</span><span class="token plain">-12-29T21:50:58.354-05:00 </span><span class="token assign-left variable" style="color:#36acaa">level</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">WARN </span><span class="token assign-left variable" style="color:#36acaa">msg</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;Changing TLS settings for registry&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">orig</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">enabled </span><span class="token assign-left variable" style="color:#36acaa">new</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">insecure </span><span class="token assign-left variable" style="color:#36acaa">host</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">cnoe.localtest.me:8443</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ regctl image copy docker.io/library/alpine:latest cnoe.localtest.me:8443/gitea/giteaadmin/alpine:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">time</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2024</span><span class="token plain">-12-29T21:50:07.489-05:00 </span><span class="token assign-left variable" style="color:#36acaa">level</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">WARN </span><span class="token assign-left variable" style="color:#36acaa">msg</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;Changing TLS settings for registry&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">orig</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">enabled </span><span class="token assign-left variable" style="color:#36acaa">new</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">disabled </span><span class="token assign-left variable" style="color:#36acaa">host</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">expert-chainsaw-7vjwj6qqgcprjp-8443.app.github.dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">time</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2024</span><span class="token plain">-12-29T21:50:07.489-05:00 </span><span class="token assign-left variable" style="color:#36acaa">level</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">WARN </span><span class="token assign-left variable" style="color:#36acaa">msg</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;Changing TLS settings for registry&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">orig</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">enabled </span><span class="token assign-left variable" style="color:#36acaa">new</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">insecure </span><span class="token assign-left variable" style="color:#36acaa">host</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">cnoe.localtest.me:8443</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Manifests: </span><span class="token number" style="color:#36acaa">17</span><span class="token plain">/17 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> Blobs: </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">.000B copied, </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">.000B skipped </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> Elapsed: 0s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cnoe.localtest.me:8443/gitea/giteaadmin/alpine:latest</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/cnoe-io/website/tree/main/docs/intro/idpbuilder/how-it-works.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/intro/idpbuilder"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">idpBuilder Overview</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/intro/idpbuilder/override"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Customizing idpbuilder</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#security" class="table-of-contents__link toc-highlight">Security</a><ul><li><a href="#self-signed-certificate" class="table-of-contents__link toc-highlight">Self Signed Certificate</a></li><li><a href="#getting-relevant-secrets" class="table-of-contents__link toc-highlight">Getting Relevant Secrets</a></li></ul></li><li><a href="#networking" class="table-of-contents__link toc-highlight">Networking</a><ul><li><a href="#traffic-flow" class="table-of-contents__link toc-highlight">Traffic Flow</a></li><li><a href="#dns-configuration" class="table-of-contents__link toc-highlight">DNS Configuration</a></li></ul></li><li><a href="#routing-modes" class="table-of-contents__link toc-highlight">Routing Modes</a><ul><li><a href="#domain-based-routing" class="table-of-contents__link toc-highlight">Domain-based routing</a></li><li><a href="#path-based-routing" class="table-of-contents__link toc-highlight">Path-based routing</a></li></ul></li><li><a href="#local-oci-registry" class="table-of-contents__link toc-highlight">Local OCI Registry</a><ul><li><a href="#pushing-image" class="table-of-contents__link toc-highlight">Pushing image</a></li><li><a href="#tagging-image" class="table-of-contents__link toc-highlight">Tagging Image</a></li><li><a href="#pulling-images" class="table-of-contents__link toc-highlight">Pulling Images</a></li><li><a href="#referencing-images-in-manifests-on-the-idpbuilder-k8s-cluster" class="table-of-contents__link toc-highlight">Referencing Images In Manifests On The Idpbuilder K8s Cluster</a></li><li><a href="#pulling-images-from-inside-idpbuilder-k8s-cluster" class="table-of-contents__link toc-highlight">Pulling Images From Inside Idpbuilder K8s Cluster:</a></li><li><a href="#transferring-images-from-remote-registries-to-idbpbuilder" class="table-of-contents__link toc-highlight">Transferring images from remote registries to idbpbuilder</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">DOCS</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro/cnoe">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/contribute">Contribute</a></li></ul></div><div class="col footer__col"><div class="footer__title">SOCIAL</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://cloud-native.slack.com/archives/C05TN9WFN5S" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://calendar.google.com/calendar/u/0/embed?src=064a2adfce866ccb02e61663a09f99147f22f06374e7a8994066bdc81e066986@group.calendar.google.com&amp;ctz=America/Los_Angeles" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community Meeting Calendar<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">MORE</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/cnoe-io" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 CNOE</div></div></div></footer></div>
<script src="/assets/js/runtime~main.7f559ae6.js"></script>
<script src="/assets/js/main.228b830d.js"></script>
</body>
</html>