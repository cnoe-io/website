"use strict";(self.webpackChunkcnoe=self.webpackChunkcnoe||[]).push([[4923],{20979:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>u,frontMatter:()=>c,metadata:()=>i,toc:()=>t});const i=JSON.parse('{"id":"reference-implementation/azure/docs/TROUBLESHOOTING","title":"TROUBLESHOOTING","description":"This guide covers common issues and their solutions when using the CNOE Azure Reference Implementation with Taskfile and Helmfile.","source":"@site/docs/reference-implementation/azure/docs/TROUBLESHOOTING.md","sourceDirName":"reference-implementation/azure/docs","slug":"/reference-implementation/azure/docs/TROUBLESHOOTING","permalink":"/docs/reference-implementation/azure/docs/TROUBLESHOOTING","draft":false,"unlisted":false,"editUrl":"https://github.com/cnoe-io/reference-implementation-azure/blob/main/docs/TROUBLESHOOTING.md","tags":[],"version":"current","frontMatter":{"custom_edit_url":"https://github.com/cnoe-io/reference-implementation-azure/blob/main/docs/TROUBLESHOOTING.md"},"sidebar":"tutorialSidebar","previous":{"title":"Task Usage Guidelines","permalink":"/docs/reference-implementation/azure/docs/TASKFILE"},"next":{"title":"IDPBuilder","permalink":"/docs/idpbuilder/"}}');var r=s(74848),l=s(28453);const c={custom_edit_url:"https://github.com/cnoe-io/reference-implementation-azure/blob/main/docs/TROUBLESHOOTING.md"},o="Troubleshooting Guide - CNOE Azure Reference Implementation",a={},t=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"Installation Issues",id:"installation-issues",level:2},{value:"Task Installation Fails",id:"task-installation-fails",level:3},{value:"Helmfile Deployment Issues",id:"helmfile-deployment-issues",level:3},{value:"Azure Workload Identity Issues",id:"azure-workload-identity-issues",level:3},{value:"Configuration Issues",id:"configuration-issues",level:2},{value:"GitHub Integration Problems",id:"github-integration-problems",level:3},{value:"Domain and DNS Issues",id:"domain-and-dns-issues",level:3},{value:"Azure Key Vault Issues",id:"azure-key-vault-issues",level:3},{value:"General Troubleshooting Approach",id:"general-troubleshooting-approach",level:2},{value:"1. Check ArgoCD Applications",id:"1-check-argocd-applications",level:3},{value:"2. Check Taskfile Operations",id:"2-check-taskfile-operations",level:3},{value:"3. Common Diagnostic Commands",id:"3-common-diagnostic-commands",level:3},{value:"Common Log Locations",id:"common-log-locations",level:3},{value:"Component-Specific Issues",id:"component-specific-issues",level:2},{value:"ArgoCD Issues",id:"argocd-issues",level:3},{value:"ArgoCD Not Accessible",id:"argocd-not-accessible",level:4},{value:"Applications Not Syncing",id:"applications-not-syncing",level:4},{value:"Crossplane Issues",id:"crossplane-issues",level:3},{value:"Provider Not Ready",id:"provider-not-ready",level:4},{value:"ExternalDNS Issues",id:"externaldns-issues",level:3},{value:"DNS Records Not Created",id:"dns-records-not-created",level:4},{value:"Cert-Manager Issues",id:"cert-manager-issues",level:3},{value:"Certificates Not Issued",id:"certificates-not-issued",level:4},{value:"Keycloak Issues",id:"keycloak-issues",level:3},{value:"Keycloak Pod Failing",id:"keycloak-pod-failing",level:4},{value:"SSO Authentication Issues",id:"sso-authentication-issues",level:4},{value:"Backstage Issues",id:"backstage-issues",level:3},{value:"Backstage Pod Crashing",id:"backstage-pod-crashing",level:4},{value:"Ingress Issues",id:"ingress-issues",level:3},{value:"Load Balancer Not Created",id:"load-balancer-not-created",level:4},{value:"Performance Issues",id:"performance-issues",level:2},{value:"Slow Installation",id:"slow-installation",level:3},{value:"High Resource Usage",id:"high-resource-usage",level:3},{value:"Recovery Procedures",id:"recovery-procedures",level:2},{value:"Reinstalling Components",id:"reinstalling-components",level:3},{value:"Backup and Restore",id:"backup-and-restore",level:3},{value:"Emergency Access",id:"emergency-access",level:3},{value:"Getting Help",id:"getting-help",level:2},{value:"Collecting Diagnostic Information",id:"collecting-diagnostic-information",level:3},{value:"Additional Resources",id:"additional-resources",level:3},{value:"Prevention Tips",id:"prevention-tips",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"troubleshooting-guide---cnoe-azure-reference-implementation",children:"Troubleshooting Guide - CNOE Azure Reference Implementation"})}),"\n",(0,r.jsx)(n.p,{children:"This guide covers common issues and their solutions when using the CNOE Azure Reference Implementation with Taskfile and Helmfile."}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Note: Most issues are related to missing prerequisites, authentication, networking, or resource constraints. Start with verifying prerequisites and work systematically through the troubleshooting steps."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#installation-issues",children:"Installation Issues"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#task-installation-fails",children:"Task Installation Fails"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#helmfile-deployment-issues",children:"Helmfile Deployment Issues"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#azure-workload-identity-issues",children:"Azure Workload Identity Issues"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#configuration-issues",children:"Configuration Issues"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#github-integration-problems",children:"GitHub Integration Problems"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#domain-and-dns-issues",children:"Domain and DNS Issues"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#azure-key-vault-issues",children:"Azure Key Vault Issues"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#general-troubleshooting-approach",children:"General Troubleshooting Approach"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#1-check-argocd-applications",children:"1. Check ArgoCD Applications"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#2-check-taskfile-operations",children:"2. Check Taskfile Operations"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#3-common-diagnostic-commands",children:"3. Common Diagnostic Commands"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#common-log-locations",children:"Common Log Locations"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#component-specific-issues",children:"Component-Specific Issues"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#argocd-issues",children:"ArgoCD Issues"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#argocd-not-accessible",children:"ArgoCD Not Accessible"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#applications-not-syncing",children:"Applications Not Syncing"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#crossplane-issues",children:"Crossplane Issues"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#provider-not-ready",children:"Provider Not Ready"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#externaldns-issues",children:"ExternalDNS Issues"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#dns-records-not-created",children:"DNS Records Not Created"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#cert-manager-issues",children:"Cert-Manager Issues"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#certificates-not-issued",children:"Certificates Not Issued"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#keycloak-issues",children:"Keycloak Issues"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#keycloak-pod-failing",children:"Keycloak Pod Failing"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#sso-authentication-issues",children:"SSO Authentication Issues"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#backstage-issues",children:"Backstage Issues"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#backstage-pod-crashing",children:"Backstage Pod Crashing"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#ingress-issues",children:"Ingress Issues"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#load-balancer-not-created",children:"Load Balancer Not Created"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#performance-issues",children:"Performance Issues"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#slow-installation",children:"Slow Installation"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#high-resource-usage",children:"High Resource Usage"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#recovery-procedures",children:"Recovery Procedures"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#reinstalling-components",children:"Reinstalling Components"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#backup-and-restore",children:"Backup and Restore"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#emergency-access",children:"Emergency Access"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#getting-help",children:"Getting Help"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#collecting-diagnostic-information",children:"Collecting Diagnostic Information"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#additional-resources",children:"Additional Resources"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#prevention-tips",children:"Prevention Tips"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"installation-issues",children:"Installation Issues"}),"\n",(0,r.jsx)(n.h3,{id:"task-installation-fails",children:"Task Installation Fails"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),": ",(0,r.jsx)(n.code,{children:"task install"})," command fails"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Common Causes"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Missing prerequisite Azure resources (AKS cluster, DNS zone, Key Vault)"}),"\n",(0,r.jsx)(n.li,{children:"Incorrect configuration in config.yaml"}),"\n",(0,r.jsx)(n.li,{children:"Azure CLI not authenticated"}),"\n",(0,r.jsx)(n.li,{children:"Incorrect cluster context"}),"\n",(0,r.jsx)(n.li,{children:"Missing required tools"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Debug Steps"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Verify prerequisite Azure resources exist\naz aks show --name $(yq '.cluster_name' config.yaml) --resource-group $(yq '.resource_group' config.yaml)\naz network dns zone show --name $(yq '.domain' config.yaml) --resource-group $(yq '.resource_group' config.yaml)\naz keyvault show --name $(yq '.keyvault' config.yaml) --resource-group $(yq '.resource_group' config.yaml)\n\n# Verify required tools\nwhich az kubectl yq jq helm helmfile task\n\n# Check Azure CLI login\naz account show\n\n# Verify correct cluster context\nkubectl config current-context\n\n# Validate configuration file\nyq '.' config.yaml\n\n# Check cluster OIDC issuer\naz aks show --name $(yq '.cluster_name' config.yaml) \\\n  --resource-group $(yq '.resource_group' config.yaml) \\\n  --query \"oidcIssuerProfile.issuerUrl\" -o tsv\n"})}),"\n",(0,r.jsx)(n.h3,{id:"helmfile-deployment-issues",children:"Helmfile Deployment Issues"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),": Helmfile fails to deploy ArgoCD"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Debug Steps"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check Helmfile syntax\ntask helmfile:lint\n\n# View what would be deployed\ntask helmfile:diff\n\n# Check Helm repositories\nhelm repo list\n\n# Manual Helmfile debug\nhelmfile --debug diff\n"})}),"\n",(0,r.jsx)(n.h3,{id:"azure-workload-identity-issues",children:"Azure Workload Identity Issues"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),": Components can't authenticate to Azure services"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Debug Steps"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check managed identity creation\naz identity list --resource-group $(yq '.resource_group' config.yaml)\n\n# Verify federated credentials\naz identity federated-credential list \\\n  --name crossplane \\\n  --resource-group $(yq '.resource_group' config.yaml)\n\n# Check service account annotations\nkubectl get sa crossplane -n crossplane-system -o yaml\n\n# Verify workload identity resources\nkubectl get workloadidentities.azure.livewyer.io -A -o yaml\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Common Fixes"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Update Azure credentials (for demo environments only)\ntask azure:creds:delete\ntask azure:creds:create\n\n# Update workload identity configuration\ntask update:secret:azure\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Important"}),": The ",(0,r.jsx)(n.code,{children:"azure:creds:*"})," tasks are helper functions for demonstration only. In production, Azure identities should be managed through your organization's infrastructure management approach."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"configuration-issues",children:"Configuration Issues"}),"\n",(0,r.jsx)(n.h3,{id:"github-integration-problems",children:"GitHub Integration Problems"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),": Backstage cannot connect to GitHub"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solutions"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Verify GitHub configuration in config.yaml\nyq '.github' config.yaml\n\n# Check if configuration was uploaded to Key Vault\naz keyvault secret show --name config --vault-name $(yq '.keyvault' config.yaml)\n\n# Update configuration\ntask update:secret\n"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Important"}),": GitHub integration details are stored in ",(0,r.jsx)(n.code,{children:"config.yaml"}),", not in private files. All configuration is centralized in this file and stored securely in Azure Key Vault."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"domain-and-dns-issues",children:"Domain and DNS Issues"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),": Services not accessible via domain names"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Debug Steps"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Check DNS resolution\nnslookup backstage.YOUR_DOMAIN\n\n# Verify ingress configuration\nkubectl get ingress -A\n\n# Check external-dns logs\nkubectl logs -n external-dns deployment/external-dns\n\n# Test load balancer IP\nkubectl get svc -n ingress-nginx ingress-nginx-controller\ncurl -H "Host: backstage.YOUR_DOMAIN" http://LOAD_BALANCER_IP\n'})}),"\n",(0,r.jsx)(n.h3,{id:"azure-key-vault-issues",children:"Azure Key Vault Issues"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),": External secrets cannot fetch secrets from Key Vault"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Debug Steps"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check Key Vault access\naz keyvault secret list --vault-name $(yq '.keyvault' config.yaml)\n\n# Verify external-secrets logs\nkubectl logs -n external-secrets deployment/external-secrets\n\n# Check workload identity for external-secrets\nkubectl get workloadidentity external-secrets -n external-secrets -o yaml\n\n# Test Key Vault connectivity\nkubectl run test-pod --rm -i --tty --image=mcr.microsoft.com/azure-cli -- az keyvault secret list --vault-name $(yq '.keyvault' config.yaml)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"general-troubleshooting-approach",children:"General Troubleshooting Approach"}),"\n",(0,r.jsx)(n.h3,{id:"1-check-argocd-applications",children:"1. Check ArgoCD Applications"}),"\n",(0,r.jsx)(n.p,{children:"All components are deployed as ArgoCD applications. Start by checking their status:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Get ArgoCD admin password\nkubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath="{.data.password}" | base64 -d\n\n# Port forward to ArgoCD UI\nkubectl port-forward svc/argocd-server -n argocd 8080:80\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Navigate to ",(0,r.jsx)(n.a,{href:"http://localhost:8080",children:"http://localhost:8080"})," and login with username ",(0,r.jsx)(n.code,{children:"admin"})," to view:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Application sync status"}),"\n",(0,r.jsx)(n.li,{children:"Resource health"}),"\n",(0,r.jsx)(n.li,{children:"Event logs"}),"\n",(0,r.jsx)(n.li,{children:"Sync history"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"2-check-taskfile-operations",children:"2. Check Taskfile Operations"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# View available tasks\ntask --list-all\n\n# Check configuration\ntask diff\n\n# Verify Helmfile status\ntask helmfile:status\n"})}),"\n",(0,r.jsx)(n.h3,{id:"3-common-diagnostic-commands",children:"3. Common Diagnostic Commands"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check cluster connectivity\nkubectl cluster-info\n\n# View all ArgoCD applications\nkubectl get applications -n argocd\n\n# Check application sets\nkubectl get applicationsets -n argocd\n\n# View workload identities\nkubectl get workloadidentities.azure.livewyer.io -A\n"})}),"\n",(0,r.jsx)(n.h3,{id:"common-log-locations",children:"Common Log Locations"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# ArgoCD logs\nkubectl logs -n argocd deployment/argocd-application-controller\nkubectl logs -n argocd deployment/argocd-server\n\n# Component logs\nkubectl logs -n NAMESPACE deployment/COMPONENT_NAME\n\n# System logs\njournalctl -u kubelet (on cluster nodes)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"component-specific-issues",children:"Component-Specific Issues"}),"\n",(0,r.jsx)(n.h3,{id:"argocd-issues",children:"ArgoCD Issues"}),"\n",(0,r.jsx)(n.h4,{id:"argocd-not-accessible",children:"ArgoCD Not Accessible"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),": Cannot access ArgoCD UI"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Debug Steps"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check ArgoCD deployment\nkubectl get pods -n argocd\n\n# Check ingress\nkubectl get ingress -n argocd\n\n# Check service\nkubectl get svc -n argocd argocd-server\n\n# Check logs\nkubectl logs -n argocd deployment/argocd-server\n"})}),"\n",(0,r.jsx)(n.h4,{id:"applications-not-syncing",children:"Applications Not Syncing"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),': ArgoCD applications stuck in "OutOfSync" or "Unknown" state']}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Common Fix"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Force refresh application\nkubectl patch app APP_NAME -n argocd --type merge --patch \'{"operation":{"initiatedBy":{"automated":true}}}\'\n\n# Check repository access\nkubectl get secret -n argocd argocd-repo-server-tls-certs-cm\n\n# Verify repository connectivity\nkubectl exec -n argocd deployment/argocd-server -- argocd repo list\n'})}),"\n",(0,r.jsx)(n.h3,{id:"crossplane-issues",children:"Crossplane Issues"}),"\n",(0,r.jsx)(n.h4,{id:"provider-not-ready",children:"Provider Not Ready"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),": Crossplane Azure provider fails to install"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Debug Steps"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check provider status\nkubectl get providers\n\n# Check provider config\nkubectl get providerconfigs\n\n# Check crossplane logs\nkubectl logs -n crossplane-system deployment/crossplane\n\n# Verify workload identity\nkubectl describe workloadidentity crossplane -n crossplane-system\n"})}),"\n",(0,r.jsx)(n.h3,{id:"externaldns-issues",children:"ExternalDNS Issues"}),"\n",(0,r.jsx)(n.h4,{id:"dns-records-not-created",children:"DNS Records Not Created"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),": DNS records are not automatically created"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Debug Steps"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check external-dns logs\nkubectl logs -n external-dns deployment/external-dns\n\n# Check workload identity\nkubectl get workloadidentity external-dns -n external-dns -o yaml\n\n# Verify DNS zone permissions\naz role assignment list --scope \"/subscriptions/$(yq '.subscription' config.yaml)/resourceGroups/$(yq '.resource_group' config.yaml)/providers/Microsoft.Network/dnszones/$(yq '.domain' config.yaml)\"\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Common Fix"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Update external-dns workload identity (demo environments)\ntask update:secret:external-dns\n\n# Check domain configuration\nyq '.domain' config.yaml\n\n# Verify DNS zone exists\naz network dns zone show --name $(yq '.domain' config.yaml) --resource-group $(yq '.resource_group' config.yaml)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"cert-manager-issues",children:"Cert-Manager Issues"}),"\n",(0,r.jsx)(n.h4,{id:"certificates-not-issued",children:"Certificates Not Issued"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),': TLS certificates remain in "Pending" state']}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Debug Steps"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check certificate status\nkubectl get certificates -A\n\n# Check certificate requests\nkubectl get certificaterequests -A\n\n# Check challenges\nkubectl get challenges -A\n\n# Check issuer status\nkubectl get clusterissuers\n\n# Check cert-manager logs\nkubectl logs -n cert-manager deployment/cert-manager\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Common Error Messages"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'Get "http://example.com/.well-known/acme-challenge/...": dial tcp: lookup example.com: no such host\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),": DNS propagation delay. Wait 5-10 minutes for DNS to propagate."]}),"\n",(0,r.jsx)(n.h3,{id:"keycloak-issues",children:"Keycloak Issues"}),"\n",(0,r.jsx)(n.h4,{id:"keycloak-pod-failing",children:"Keycloak Pod Failing"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),": Keycloak pods crash or fail to start"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Debug Steps"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check pod status\nkubectl get pods -n keycloak\n\n# Check logs\nkubectl logs -n keycloak deployment/keycloak\n\n# Check persistent volume claims\nkubectl get pvc -n keycloak\n\n# Check secrets\nkubectl get secrets -n keycloak\n"})}),"\n",(0,r.jsx)(n.h4,{id:"sso-authentication-issues",children:"SSO Authentication Issues"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),": Cannot log into Backstage via Keycloak"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Debug Steps"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check Keycloak accessibility\ncurl -k https://keycloak.YOUR_DOMAIN/realms/cnoe/.well-known/openid-configuration\n\n# Check user secrets\nkubectl get secrets -n keycloak keycloak-user-config -o yaml\n\n# Verify Backstage configuration\nkubectl get configmap -n backstage backstage-config -o yaml\n"})}),"\n",(0,r.jsx)(n.h3,{id:"backstage-issues",children:"Backstage Issues"}),"\n",(0,r.jsx)(n.h4,{id:"backstage-pod-crashing",children:"Backstage Pod Crashing"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),": Backstage pods fail to start"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Debug Steps"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check pod logs\nkubectl logs -n backstage deployment/backstage\n\n# Check configuration\nkubectl get configmap -n backstage -o yaml\n\n# Check secrets\nkubectl get secrets -n backstage -o yaml\n\n# Verify GitHub integration configuration in config.yaml\nyq '.github' config.yaml\n"})}),"\n",(0,r.jsx)(n.h3,{id:"ingress-issues",children:"Ingress Issues"}),"\n",(0,r.jsx)(n.h4,{id:"load-balancer-not-created",children:"Load Balancer Not Created"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),": ingress-nginx service has no external IP"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Debug Steps"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check service status\nkubectl get svc -n ingress-nginx\n\n# Check ingress-nginx logs\nkubectl logs -n ingress-nginx deployment/ingress-nginx-controller\n\n# Check Azure Load Balancer\naz network lb list --resource-group MC_$(yq '.resource_group' config.yaml)_$(yq '.cluster_name' config.yaml)_$(yq '.location' config.yaml)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"performance-issues",children:"Performance Issues"}),"\n",(0,r.jsx)(n.h3,{id:"slow-installation",children:"Slow Installation"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),": Installation takes very long or times out"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Common Causes"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"DNS propagation delays"}),"\n",(0,r.jsx)(n.li,{children:"Certificate issuance delays"}),"\n",(0,r.jsx)(n.li,{children:"Image pull issues"}),"\n",(0,r.jsx)(n.li,{children:"Resource constraints"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Debug Steps"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check node resources\nkubectl top nodes\n\n# Check pod resources\nkubectl top pods -A\n\n# Scale up cluster if needed (using your infrastructure management approach)\n# Example for testing: az aks scale --name CLUSTER --resource-group RG --node-count 3\n\n# Check image pull status\nkubectl get events -A --sort-by=.metadata.creationTimestamp\n"})}),"\n",(0,r.jsx)(n.h3,{id:"high-resource-usage",children:"High Resource Usage"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),": Cluster running out of resources"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Debug Steps"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check resource requests and limits\nkubectl describe nodes\n\n# Identify resource-hungry pods\nkubectl top pods -A --sort-by=cpu\nkubectl top pods -A --sort-by=memory\n\n# Check persistent volume usage\nkubectl get pv\n"})}),"\n",(0,r.jsx)(n.h2,{id:"recovery-procedures",children:"Recovery Procedures"}),"\n",(0,r.jsx)(n.h3,{id:"reinstalling-components",children:"Reinstalling Components"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Reinstall specific component\nkubectl delete app COMPONENT_NAME -n argocd\ntask sync\n\n# Full reinstall\ntask uninstall\ntask install\n"})}),"\n",(0,r.jsx)(n.h3,{id:"backup-and-restore",children:"Backup and Restore"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Backup ArgoCD configuration\nkubectl get applications -n argocd -o yaml > argocd-apps-backup.yaml\n\n# Backup configuration from Key Vault\naz keyvault secret show --name config --vault-name $(yq '.keyvault' config.yaml) > config-backup.json\n\n# Restore from backup\nkubectl apply -f argocd-apps-backup.yaml\n"})}),"\n",(0,r.jsx)(n.h3,{id:"emergency-access",children:"Emergency Access"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Direct kubectl access to services\nkubectl port-forward svc/argocd-server -n argocd 8080:80\nkubectl port-forward svc/backstage -n backstage 3000:7007\n\n# Reset ArgoCD admin password\nkubectl patch secret argocd-initial-admin-secret -n argocd -p '{\"data\":{\"password\":\"'$(echo -n 'new-password' | base64)'\"}}'\n"})}),"\n",(0,r.jsx)(n.h2,{id:"getting-help",children:"Getting Help"}),"\n",(0,r.jsx)(n.h3,{id:"collecting-diagnostic-information",children:"Collecting Diagnostic Information"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Create diagnostic bundle\nmkdir cnoe-diagnostics\nkubectl cluster-info dump --output-directory=cnoe-diagnostics/cluster-info\nkubectl get events -A --sort-by=.metadata.creationTimestamp > cnoe-diagnostics/events.yaml\nkubectl get pods -A -o yaml > cnoe-diagnostics/pods.yaml\ntask helmfile:status > cnoe-diagnostics/helmfile-status.txt\nyq '.' config.yaml > cnoe-diagnostics/config.yaml\n"})}),"\n",(0,r.jsx)(n.h3,{id:"additional-resources",children:"Additional Resources"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://cnoe.io/community",children:"CNOE Community"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://argo-cd.readthedocs.io/",children:"ArgoCD Documentation"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://backstage.io/docs/",children:"Backstage Documentation"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"prevention-tips",children:"Prevention Tips"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Proper Prerequisites"}),": Ensure all Azure resources are properly provisioned before installation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Configuration Management"}),": Keep config.yaml up-to-date and validate before applying changes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Regular Updates"}),": Use ",(0,r.jsx)(n.code,{children:"task sync"})," to keep components updated"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Monitor Resources"}),": Set up monitoring for cluster resources"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Backup Strategy"}),": Regular backups of critical configurations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Testing"}),": Test changes in a separate environment first"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Infrastructure Management"}),": Use proper infrastructure management tools for production Azure resources"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>o});var i=s(96540);const r={},l=i.createContext(r);function c(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);